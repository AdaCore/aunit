with "../../aunit/aunit_build";

project Support is
   --  Support lib for limited run-times

   for Languages use ("Ada");

   case AUnit_Build.Target is
      when "native" =>
         --  zfp or other limited run-time do not need any special
         --  support when run on native platforms
      when others =>
         for Object_Dir use "obj";
         for Library_Dir use "lib";
         for Library_Name use "zfp_support";
         for Library_Kind use "static";
   end case;

   case AUnit_Build.Target is
      when "native" =>
         for Source_Dirs use ();
      when "powerpc-wrs-vxworksae" | "powerpc-wrs-vxworks" | 
           "i586-wrs-vxworksae" =>
         for Source_Dirs use ("src", "src/vxworksae");
      when "powerpc-elf" =>
         for Source_Dirs use ("src", "src/ppc-elf");
         for Languages use Project'Languages & "C" & "ASM";
      when others =>
         for Source_Dirs use ();
   end case;

   package Compiler is
      for Default_Switches ("ada") use ("-O1", "-gnatf", "-gnato");
   end Compiler;

   package Linker is
      case AUnit_Build.Target is
         when "native" =>
         when others =>
            for Linker_Options use ("-lgnat", "-lzfp_support");
      end case;
   end Linker;

end Support;
